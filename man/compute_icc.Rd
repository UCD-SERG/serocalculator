% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cluster_robust_se.R
\name{compute_icc}
\alias{compute_icc}
\title{Calculate Intraclass Correlation Coefficient (ICC) for seroincidence}
\usage{
compute_icc(fit)
}
\arguments{
\item{fit}{a \code{seroincidence} object from \code{\link[=est_seroincidence]{est_seroincidence()}} that was
fitted with clustering (i.e., with \code{cluster_var} specified)}
}
\value{
A list with the following components:
\itemize{
\item \code{icc}: the estimated intraclass correlation coefficient
\item \code{deff}: the design effect (ratio of cluster-robust to standard variance)
\item \code{avg_cluster_size}: average number of observations per cluster
\item \code{n_clusters}: number of clusters
\item \code{cluster_var}: name of the cluster variable used
}
}
\description{
Computes the Intraclass Correlation Coefficient (ICC) for a seroincidence
estimate from a clustered sampling design. The ICC measures the proportion
of total variance that is due to between-cluster variation, indicating
how correlated observations within the same cluster are.

The ICC is estimated using the design effect (DEFF):
\deqn{ICC = \frac{DEFF - 1}{\bar{m} - 1}}
where DEFF is the ratio of cluster-robust to standard variance, and
\eqn{\bar{m}} is the average cluster size.
}
\examples{
library(dplyr)

xs_data <- sees_pop_data_pk_100

curve <-
  typhoid_curves_nostrat_100 |>
  filter(antigen_iso \%in\% c("HlyE_IgA", "HlyE_IgG"))

noise <- example_noise_params_pk

# Fit model with clustering
est_cluster <- est_seroincidence(
  pop_data = xs_data,
  sr_params = curve,
  noise_params = noise,
  antigen_isos = c("HlyE_IgG", "HlyE_IgA"),
  cluster_var = "cluster"
)

# Calculate ICC
icc_result <- compute_icc(est_cluster)
print(icc_result$icc)
}
