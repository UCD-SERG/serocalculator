# `{serocalculator}`

Antibody levels measured in a cross–sectional population sample can be
translated into an estimate of the frequency with which seroconversions
(infections) occur in the sampled population. In other words, the
presence of many high antibody titers indicates that many individuals
likely experienced infection recently and the burden of disease is high
in the population, while low titers indicate a low frequency of
infections in the sampled population and therefore a lower burden of
disease.

The [serocalculator](https://ucd-serg.github.io/serocalculator/) package
was designed to use the longitudinal response characteristics using a
set of modeled parameters characterizing the longitudinal response of
the selected serum antibodies. More details on the underlying methods
can be found in [Getting
Started](https://ucd-serg.github.io/serocalculator/articles/serocalculator.html).

## Installing R

The [serocalculator](https://ucd-serg.github.io/serocalculator/) package
is designed to be used in [R](https://www.r-project.org/), which is a
free, open-source software environment for statistical computing and
graphics. The end user of this package must have access to a working
installation of the R software. We recommend installing [base
R](https://cran.r-project.org/) and a Graphical User Interface (GUI) for
R such as [RStudio](https://posit.co/products/open-source/rstudio/).

If you need to download and install R and/or RStudio, we recommend
following the tutorial below from *Hands On Programming in R* by Garrett
Grolemund:

**Installing R and RStudio**:
<https://rstudio-education.github.io/hopr/starting.html>

## Installing the `{serocalculator}` Package

The [serocalculator](https://ucd-serg.github.io/serocalculator/) package
must be installed in R before first use.

``` r
# Install package
install.packages("serocalculator")
```

### Installing the Development Version

To install the latest development version, you must install the
[`{devtools}`](https://devtools.r-lib.org/) R package and then download
[serocalculator](https://ucd-serg.github.io/serocalculator/) from
[GitHub](https://github.com/). Enter the code below into the R console
to install both packages.

``` r
# Install the devtools package and the development version of serocalculator
install.packages("devtools")
devtools::install_github(
  repo = "ucd-serg/serocalculator", 
  build_manual = TRUE)
```

#### A Note for Windows Users

Before installing the development version of
[serocalculator](https://ucd-serg.github.io/serocalculator/), Windows
users will need to install Rtools, which contains a collection of tools
for building and employing R packages that are still in development.
This can be done either:

1.  [during the *devtools* package
    installation](#during-devtools-installation), **or**

2.  [independently](#independently), if *devtools* is already installed.

##### During devtools installation

When prompted to install additional build tools, select “Yes”, and
Rtools will be installed.

![Click Yes to install Rtools along with the devtools
package](reference/figures/Rtools1.png)

Click Yes to install Rtools along with the *devtools* package

**Note: After installing Rtools, you may need to restart RStudio before
continuing to install `serocalculator`.**

##### Independently:

1.  Download Rtools from
    <https://cran.r-project.org/bin/windows/Rtools/>

2.  Run the installer

    - During the Rtools installation you may see a window asking you to
      “Select Additional Tasks”.
    - Do **not** select the box for “Edit the system PATH”. devtools and
      RStudio should put Rtools on the PATH automatically when it is
      needed.
    - **Do** select the box for “Save version information to registry”.
      It should be selected by default.

## Learning to use `{serocalculator}`

Successful installation can be confirmed by loading the package into
your R workspace and exploring help files and manuals distributed with
the package:

``` r
# Load package "seroincidence".
library(serocalculator)

# Show R help for the package.
?serocalculator
```

Additionally, most package details can be found when executing the
following commands:

``` r
# Show description.
packageDescription("serocalculator")

# Show citation.
citation("serocalculator")
```

The full documentation for the current CRAN release version of
[serocalculator](https://ucd-serg.github.io/serocalculator/) can be
accessed at <https://ucd-serg.github.io/serocalculator/>, and the the
documentation for the
[`main`](https://github.com/UCD-SERG/serocalculator/tree/main)
in-development version can be accessed at
<https://ucd-serg.github.io/serocalculator/dev/>.

## Getting Help

If you have questions about using this software package, please use the
[Q&A
forum](https://github.com/UCD-SERG/serocalculator/discussions/categories/q-a).

If you encounter a clear bug, please file an issue with a [minimal
reproducible example](https://reprex.tidyverse.org/) on
[GitHub](https://github.com/UCD-SERG/serocalculator/issues).

Another great resource is **The Epidemiologist R Handbook**, which
includes an introductory page on asking for help with R packages via
GitHub: <https://epirhandbook.com/en/new_pages/help.html>

## Contributing to this project

We welcome contributions to this project - anything from typo
corrections to new features. Please see our [Contributor
guide](https://ucd-serg.github.io/serocalculator/CONTRIBUTING.html#fixing-typos)
for more information.

## QR code

This QR code is a direct link to the latest-release version of the
package website:

``` R
#> Warning: package 'qrcode' was built under R version 4.4.2
```

![QR code for serocalculator website](reference/figures/qr.svg)

QR code for `serocalculator` website

# Package index

## Prepare data, kinetics models, and noise parameters for analysis

- [`as_pop_data()`](https://ucd-serg.github.io/serocalculator/reference/as_pop_data.md)
  : Load a cross-sectional antibody survey data set

- [`load_pop_data()`](https://ucd-serg.github.io/serocalculator/reference/load_pop_data.md)
  : Load a cross-sectional antibody survey data set

- [`as_sr_params()`](https://ucd-serg.github.io/serocalculator/reference/as_sr_params.md)
  : Load longitudinal seroresponse parameters

- [`load_sr_params()`](https://ucd-serg.github.io/serocalculator/reference/load_sr_params.md)
  : Load longitudinal seroresponse parameter samples

- [`as_noise_params()`](https://ucd-serg.github.io/serocalculator/reference/as_noise_params.md)
  : Load noise parameters

- [`load_noise_params()`](https://ucd-serg.github.io/serocalculator/reference/load_noise_params.md)
  : Load noise parameters

- [`check_pop_data()`](https://ucd-serg.github.io/serocalculator/reference/check_pop_data.md)
  : Check the formatting of a cross-sectional antibody survey dataset.

- [`strata()`](https://ucd-serg.github.io/serocalculator/reference/strata.md)
  :

  Extract `Strata` metadata from an object

## Extract information from data, seroresponse models, and noise parameters

- [`get_biomarker_levels()`](https://ucd-serg.github.io/serocalculator/reference/get_biomarker_levels.md)
  : Extract biomarker levels
- [`get_biomarker_names_var()`](https://ucd-serg.github.io/serocalculator/reference/get_biomarker_names_var.md)
  : Get biomarker variable name
- [`get_values_var()`](https://ucd-serg.github.io/serocalculator/reference/get_values_var.md)
  : Extract antibody measurement values
- [`get_values()`](https://ucd-serg.github.io/serocalculator/reference/get_values.md)
  : Get antibody measurement values

## Summarize data

- [`summary(`*`<pop_data>`*`)`](https://ucd-serg.github.io/serocalculator/reference/summary.pop_data.md)
  [`print(`*`<summary.pop_data>`*`)`](https://ucd-serg.github.io/serocalculator/reference/summary.pop_data.md)
  : Summarize cross-sectional antibody survey data

## Visualize data

- [`autoplot(`*`<pop_data>`*`)`](https://ucd-serg.github.io/serocalculator/reference/autoplot.pop_data.md)
  : Plot distribution of antibodies
- [`autoplot(`*`<curve_params>`*`)`](https://ucd-serg.github.io/serocalculator/reference/autoplot.curve_params.md)
  : Graph antibody decay curves by antigen isotype
- [`graph.curve.params()`](https://ucd-serg.github.io/serocalculator/reference/graph.curve.params.md)
  : Graph estimated antibody decay curves
- [`graph_loglik()`](https://ucd-serg.github.io/serocalculator/reference/graph_loglik.md)
  : Graph log-likelihood of data
- [`log_likelihood()`](https://ucd-serg.github.io/serocalculator/reference/log_likelihood.md)
  : Calculate log-likelihood

## Estimate seroconversion incidence rates

- [`est_seroincidence()`](https://ucd-serg.github.io/serocalculator/reference/est_seroincidence.md)
  : Find the maximum likelihood estimate of the incidence rate parameter
- [`est_seroincidence_by()`](https://ucd-serg.github.io/serocalculator/reference/est_seroincidence_by.md)
  : Estimate Seroincidence

## Summarize seroconversion incidence rate estimates

- [`summary(`*`<seroincidence>`*`)`](https://ucd-serg.github.io/serocalculator/reference/summary.seroincidence.md)
  : Summarizing fitted seroincidence models

- [`summary(`*`<seroincidence.by>`*`)`](https://ucd-serg.github.io/serocalculator/reference/summary.seroincidence.by.md)
  :

  Summary Method for `"seroincidence.by"` Objects

## Visualize seroconversion incidence rate estimates

- [`autoplot(`*`<seroincidence>`*`)`](https://ucd-serg.github.io/serocalculator/reference/autoplot.seroincidence.md)
  : Plot the log-likelihood curve for the incidence rate estimate

- [`autoplot(`*`<seroincidence.by>`*`)`](https://ucd-serg.github.io/serocalculator/reference/autoplot.seroincidence.by.md)
  :

  Plot `seroincidence.by` log-likelihoods

- [`autoplot(`*`<summary.seroincidence.by>`*`)`](https://ucd-serg.github.io/serocalculator/reference/autoplot.summary.seroincidence.by.md)
  :

  Plot method for `summary.seroincidence.by` objects

## Example data sets

- [`sees_pop_data_100`](https://ucd-serg.github.io/serocalculator/reference/sees_pop_data_100.md)
  : Small example cross-sectional data set

- [`sees_pop_data_pk_100`](https://ucd-serg.github.io/serocalculator/reference/sees_pop_data_pk_100.md)
  : Small example cross-sectional data set

- [`typhoid_curves_nostrat_100`](https://ucd-serg.github.io/serocalculator/reference/typhoid_curves_nostrat_100.md)
  : Small example of antibody response curve parameters for typhoid

- [`example_noise_params_sees`](https://ucd-serg.github.io/serocalculator/reference/example_noise_params_sees.md)
  : Small example of noise parameters for typhoid

- [`example_noise_params_pk`](https://ucd-serg.github.io/serocalculator/reference/example_noise_params_pk.md)
  : Small example of noise parameters for typhoid

- [`sees_typhoid_ests_strat`](https://ucd-serg.github.io/serocalculator/reference/sees_typhoid_ests_strat.md)
  :

  Example `"seroincidence.by"` object

- [`serocalculator_example()`](https://ucd-serg.github.io/serocalculator/reference/serocalculator_example.md)
  : Get path to an example file

## Simulate data sets

- [`sim_pop_data()`](https://ucd-serg.github.io/serocalculator/reference/sim_pop_data.md)
  : Simulate a cross-sectional serosurvey with noise

- [`sim_pop_data_multi()`](https://ucd-serg.github.io/serocalculator/reference/sim_pop_data_multi.md)
  : Simulate multiple data sets

- [`analyze_sims()`](https://ucd-serg.github.io/serocalculator/reference/analyze_sims.md)
  : Analyze simulation results

- [`autoplot(`*`<sim_results>`*`)`](https://ucd-serg.github.io/serocalculator/reference/autoplot.sim_results.md)
  :

  Plot simulation results
  [`autoplot()`](https://ggplot2.tidyverse.org/reference/autoplot.html)
  method for `sim_results` objects

# Articles

### Get started

- [Introduction to
  serocalculator](https://ucd-serg.github.io/serocalculator/articles/serocalculator.md):

  A summary of the methods behind serocalculator.

### Methodology

- [Methodology](https://ucd-serg.github.io/serocalculator/articles/methodology.md):

- [Simulation
  studies](https://ucd-serg.github.io/serocalculator/articles/simulate_xsectionalData.md):

  A demonstration of the accuracy of the estimation approach

### Examples

- [Enteric Fever Seroincidence
  Vignette](https://ucd-serg.github.io/serocalculator/articles/enteric_fever_example.md):
- [Scrub Typhus Seroincidence
  Vignette](https://ucd-serg.github.io/serocalculator/articles/scrubTyphus_example.md):

### Other

- [test-quarto-article](https://ucd-serg.github.io/serocalculator/articles/test-quarto-article.md):
